"use strict";(self.webpackChunkproject_wiki=self.webpackChunkproject_wiki||[]).push([[9953],{6606:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"Weather API/Step by Step Guide for the Weather API Setup","title":"Step by Step Guide for the Weather API Setup","description":"Here\'s a step-by-step guide for setting up your Weather API on a Windows machine, using Flask, Redis (Cloud), and Visual Crossing Weather API.","source":"@site/docs/Weather API/Step by Step Guide for the Weather API Setup.md","sourceDirName":"Weather API","slug":"/Weather API/Step by Step Guide for the Weather API Setup","permalink":"/project-wiki/docs/Weather API/Step by Step Guide for the Weather API Setup","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Weather API","permalink":"/project-wiki/docs/Weather API/"}}');var t=r(4848),i=r(8453);const d={},a=void 0,o={},c=[{value:"\ud83e\uddf0 Requirements",id:"-requirements",level:3},{value:"\ud83e\uddf1 Step 1: Create Your Project Directory",id:"-step-1-create-your-project-directory",level:3},{value:"\ud83d\udcc4 Step 2: Create Project Files",id:"-step-2-create-project-files",level:3},{value:"\ud83d\udce6 Step 3: Create and Activate Virtual Environment (Recommended)",id:"-step-3-create-and-activate-virtual-environment-recommended",level:3},{value:"\ud83d\udce5 Step 4: Install Required Python Packages",id:"-step-4-install-required-python-packages",level:3},{value:"\ud83e\uddea Step 5: Add Your <code>.env</code> File",id:"-step-5-add-your-env-file",level:3},{value:"\ud83e\udde0 Step 6: Add the Code",id:"-step-6-add-the-code",level:3},{value:"<code>app.py</code>",id:"apppy",level:4},{value:"<code>weather_api.py</code>",id:"weather_apipy",level:4},{value:"<code>cache.py</code>",id:"cachepy",level:4},{value:"<code>requirements.txt</code>",id:"requirementstxt",level:4},{value:"\ud83e\uddea Step 7: Run Your Flask Server",id:"-step-7-run-your-flask-server",level:3},{value:"\ud83c\udf10 Step 8: Test the API",id:"-step-8-test-the-api",level:3},{value:"\ud83d\udd10 Notes on Redis Cloud:",id:"-notes-on-redis-cloud",level:3},{value:"\u2705 Final Tips",id:"-final-tips",level:3}];function l(e){const n={a:"a",br:"br",code:"code",h3:"h3",h4:"h4",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.p,{children:["Here's a ",(0,t.jsx)(n.strong,{children:"step-by-step guide"})," for setting up your ",(0,t.jsx)(n.strong,{children:"Weather API"})," on a ",(0,t.jsx)(n.strong,{children:"Windows machine"}),", using ",(0,t.jsx)(n.strong,{children:"Flask"}),", ",(0,t.jsx)(n.strong,{children:"Redis (Cloud)"}),", and ",(0,t.jsx)(n.strong,{children:"Visual Crossing Weather API"}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"-requirements",children:"\ud83e\uddf0 Requirements"}),"\n",(0,t.jsx)(n.p,{children:"Before starting, ensure you have the following:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"\u2705 Python 3.x installed on Windows"}),"\n",(0,t.jsx)(n.li,{children:"\u2705 A code editor like VS Code"}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 Redis Cloud account (e.g., ",(0,t.jsx)(n.a,{href:"https://redis.com/redis-enterprise/cloud/",children:"Redis Cloud by Redis Enterprise"}),")"]}),"\n",(0,t.jsxs)(n.li,{children:["\u2705 Visual Crossing API Key (",(0,t.jsx)(n.a,{href:"https://www.visualcrossing.com/weather-api",children:"Sign up here"}),")"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"-step-1-create-your-project-directory",children:"\ud83e\uddf1 Step 1: Create Your Project Directory"}),"\n",(0,t.jsx)(n.p,{children:"Open your terminal (Command Prompt, PowerShell, or VS Code Terminal) and run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"mkdir weather-api\ncd weather-api\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"-step-2-create-project-files",children:"\ud83d\udcc4 Step 2: Create Project Files"}),"\n",(0,t.jsx)(n.p,{children:"Create the following files manually or using this command (on Git Bash or WSL):"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"touch app.py weather_api.py cache.py .env requirements.txt\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Otherwise, just ",(0,t.jsx)(n.strong,{children:"create them manually"})," inside the folder."]}),"\n",(0,t.jsx)(n.p,{children:"Project Structure:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"\nweather-api/\n\u2502\n\u251c\u2500\u2500 app.py                # Main Flask app\n\u251c\u2500\u2500 cache.py              # Redis cache logic\n\u251c\u2500\u2500 weather.py            # Weather API logic (calls Visual Crossing)\n\u251c\u2500\u2500 .env                  # Environment variables\n\u251c\u2500\u2500 requirements.txt      # Project dependencies\n\u2514\u2500\u2500 README.md\n\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"-step-3-create-and-activate-virtual-environment-recommended",children:"\ud83d\udce6 Step 3: Create and Activate Virtual Environment (Recommended)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"python -m venv venv\nvenv\\Scripts\\activate\n"})}),"\n",(0,t.jsxs)(n.p,{children:["You should now see ",(0,t.jsx)(n.code,{children:"(venv)"})," in your terminal prompt."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"-step-4-install-required-python-packages",children:"\ud83d\udce5 Step 4: Install Required Python Packages"}),"\n",(0,t.jsx)(n.p,{children:"Run:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip install flask requests python-dotenv redis flask-limiter\n"})}),"\n",(0,t.jsx)(n.p,{children:"Save dependencies:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"pip freeze > requirements.txt\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.h3,{id:"-step-5-add-your-env-file",children:["\ud83e\uddea Step 5: Add Your ",(0,t.jsx)(n.code,{children:".env"})," File"]}),"\n",(0,t.jsxs)(n.p,{children:["Create a ",(0,t.jsx)(n.code,{children:".env"})," file in the root of your project with:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-env",children:"API_KEY=your_visual_crossing_api_key\nREDIS_URL=your_redis_cloud_url\n"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"API_KEY"}),": Get from your ",(0,t.jsx)(n.a,{href:"https://www.visualcrossing.com/weather-api",children:"Visual Crossing account"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"REDIS_URL"}),": Get from your Redis cloud account; it looks like this:"]}),"\n"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"redis://default:<password>@<host>:<port>\n"})}),"\n",(0,t.jsx)(n.p,{children:"Example:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"redis://default:Ac6oAAIjcD@redis-12345.c99.us-east-1-4.ec2.cloud.redislabs.com:12345\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"-step-6-add-the-code",children:"\ud83e\udde0 Step 6: Add the Code"}),"\n",(0,t.jsx)(n.h4,{id:"apppy",children:(0,t.jsx)(n.code,{children:"app.py"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'from flask import Flask, request, jsonify\nfrom dotenv import load_dotenv\nimport os\nfrom weather_api import get_weather\nfrom cache import cache_get, cache_set\nfrom flask_limiter import Limiter\nfrom flask_limiter.util import get_remote_address\n\nload_dotenv()\n\napp = Flask(__name__)\nlimiter = Limiter(app=app, key_func=get_remote_address)\n\n@app.route(\'/\')\ndef home():\n    return {"message": "Welcome to the Weather API!"}\n\n@app.route(\'/weather\')\n@limiter.limit("10/minute")\ndef weather():\n    city = request.args.get(\'city\')\n    if not city:\n        return jsonify({"error": "City parameter is required"}), 400\n\n    cached = cache_get(city)\n    if cached:\n        return jsonify({"source": "cache", "data": cached})\n\n    try:\n        data = get_weather(city)\n        cache_set(city, data, ex=43200)\n        return jsonify({"source": "api", "data": data})\n    except Exception as e:\n        return jsonify({"error": str(e)}), 500\n\nif __name__ == \'__main__\':\n    app.run(debug=True)\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h4,{id:"weather_apipy",children:(0,t.jsx)(n.code,{children:"weather_api.py"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import requests\nimport os\n\nAPI_KEY = os.getenv("API_KEY")\n\ndef get_weather(city):\n    url = f"https://weather.visualcrossing.com/VisualCrossingWebServices/rest/services/timeline/{city}?unitGroup=metric&key={API_KEY}&contentType=json"\n    response = requests.get(url)\n\n    if response.status_code != 200:\n        raise Exception("Error fetching weather data")\n\n    return response.json()\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h4,{id:"cachepy",children:(0,t.jsx)(n.code,{children:"cache.py"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-python",children:'import redis\nimport os\nimport json\n\nredis_url = os.getenv("REDIS_URL", "redis://localhost:6379")\nr = redis.Redis.from_url(redis_url)\n\ndef cache_get(key):\n    data = r.get(key)\n    if data:\n        return json.loads(data)\n    return None\n\ndef cache_set(key, value, ex=43200):\n    r.set(key, json.dumps(value), ex=ex)\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h4,{id:"requirementstxt",children:(0,t.jsx)(n.code,{children:"requirements.txt"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-txt",children:"flask\nrequests\npython-dotenv\nredis\nflask-limiter\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"-step-7-run-your-flask-server",children:"\ud83e\uddea Step 7: Run Your Flask Server"}),"\n",(0,t.jsx)(n.p,{children:"In your terminal, make sure your virtual environment is activated, then:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"python app.py\n"})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"-step-8-test-the-api",children:"\ud83c\udf10 Step 8: Test the API"}),"\n",(0,t.jsx)(n.p,{children:"Open your browser or Postman:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"http://127.0.0.1:5000/weather?city=Nairobi\n"})}),"\n",(0,t.jsxs)(n.p,{children:["\u2705 First response: fetched from API",(0,t.jsx)(n.br,{}),"\n","\u2705 Second response (within 12 hrs): fetched from ",(0,t.jsx)(n.strong,{children:"Redis cache"})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"-notes-on-redis-cloud",children:"\ud83d\udd10 Notes on Redis Cloud:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["If Redis uses ",(0,t.jsx)(n.strong,{children:"TLS/SSL"}),", make sure your Redis host ends with ",(0,t.jsx)(n.code,{children:"rediss://"})," not ",(0,t.jsx)(n.code,{children:"redis://"}),"."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:["In that case, update your ",(0,t.jsx)(n.code,{children:".env"})," to:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"REDIS_URL=rediss://default:<password>@<host>:<port>\n"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"redis-py"})," automatically handles SSL for ",(0,t.jsx)(n.code,{children:"rediss://"})," URLs."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"-final-tips",children:"\u2705 Final Tips"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u2714 Use ",(0,t.jsx)(n.code,{children:".gitignore"})," to exclude ",(0,t.jsx)(n.code,{children:"venv"})," and ",(0,t.jsx)(n.code,{children:".env"})]}),"\n",(0,t.jsx)(n.li,{children:"\u2714 You can deploy this to Render, Railway, or Heroku (free platforms for testing APIs)"}),"\n",(0,t.jsx)(n.li,{children:"\u2714 Add Swagger UI or Postman collection to document your API"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>d,x:()=>a});var s=r(6540);const t={},i=s.createContext(t);function d(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);